<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"/>
    <title>Game</title>
    <link rel="shortcut icon" href="https://www.dropbox.com/scl/fi/4337334urxsxvosvbi9d9/favicon.ico?rlkey=62jt6b2ylmsbgd4vsgrfi42ik&amp;st=3ooipc8i&amp;dl=1"/>
    <link rel="stylesheet" href="https://www.dropbox.com/scl/fi/sgb2stzeft5ehrftb3qz4/style.css?rlkey=3y5y37cv6uon2ur4j7p8lsyk8&amp;st=803ixieq&amp;dl=1"/>
    <script src="https://www.dropbox.com/scl/fi/95tc7m66mkuqnzjbch7je/UnityProgress.js?rlkey=z5ejoh8bzglw7eilje8f2p8wj&amp;st=b4z9udmx&amp;dl=1"></script>
    <script src="https://www.dropbox.com/scl/fi/04c4ogs13req2brn9uksb/UnityLoader.js?rlkey=xkberz7q2z1db6gg1ipaq30vi&amp;st=1lito0k0&amp;dl=1"></script>
    <script>
      function FitScreen() {
        var w = 960;
        var h = 600;
        var availWidth = window.innerWidth;
        var availHeight = window.innerHeight - 10;

        var canvas = document.getElementById("#canvas");
        if (availWidth / availHeight > w / h) {
          height = availHeight;
          width = (height * w) / h;
        } else {
          width = availWidth;
          height = (width * h) / w;
        }

        canvas.width = width;
        canvas.height = height;

        document.getElementById("gameContainer").style.width = width + "px";
        document.getElementById("gameContainer").style.height = height + "px";
      }

      function InitExternEval(_appId) {
        console.log('YandexInitExternEval ' + _appId);

        YaGames.init().then(ysdk_ => {
          window.ysdk = ysdk_;
          window.ysdk.adv.showFullscreenAdv({
            callbacks: {
              onClose: function () {
                gameInstance.SendMessage('YandexAPI', 'AdMessage', 'onClose');
              },

              onOpen: function () {
                gameInstance.SendMessage('YandexAPI', 'AdMessage', 'onOpen');
              },

              onError: function () {
                gameInstance.SendMessage('YandexAPI', 'AdMessage', 'onError');
              },

              onOffline: function () {
                gameInstance.SendMessage('YandexAPI', 'AdMessage', 'onOffline');
              }
            }
          });
        });
      }

      function ExternEval() {
        console.log('YandexExternEval');

        gameInstance.SendMessage('YandexAPI', 'AdMessage', 'CallAd');

        window.ysdk.adv.showFullscreenAdv({
          callbacks: {
            onClose: function () {
              gameInstance.SendMessage('YandexAPI', 'AdMessage', 'onClose');
            },

            onOpen: function () {
              gameInstance.SendMessage('YandexAPI', 'AdMessage', 'onOpen');
            },

            onError: function () {
              gameInstance.SendMessage('YandexAPI', 'AdMessage', 'onError');
            },

            onOffline: function () {
              gameInstance.SendMessage('YandexAPI', 'AdMessage', 'onOffline');
            }
          }
        });
      }

      var gameInstance = UnityLoader.instantiate("gameContainer", "https://www.dropbox.com/scl/fi/6t8u21g20lnx0lyu738q1/game.json?rlkey=2lupxlsm8syp7rj7ivfemqamk&amp;st=bvrpetfk&amp;dl=1", { onProgress: UnityProgress });
    </script>
  </head>
  <body onfocus="FitScreen();" onload="FitScreen();" onresize="FitScreen();">
    <div class="webgl-content">
      <div id="gameContainer" style="width: auto; height: auto"></div>
    </div>
  </body>
</html>
